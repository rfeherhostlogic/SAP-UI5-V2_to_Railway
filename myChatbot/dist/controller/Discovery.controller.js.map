{"version":3,"file":"Discovery.controller.js","names":["sap","ui","define","Controller","MessageToast","AiService","Column","Text","ColumnListItem","extend","onInit","this","_statusTimer","onExit","_clearStatusTimer","onStartDiscovery","async","oModel","getView","getModel","setProperty","oResult","runDiscovery","tables","prompt","suggestions","_resetMlFlow","oError","sMessage","_extractError","show","onStartMlModel","oEvent","oContext","getSource","getBindingContext","oSuggestion","getObject","oStart","discoverySpecChatStart","use_case","sQuestion","String","question","trim","session_id","Number","step","max_steps","role","content","onSubmitSpecAnswer","sSessionId","getProperty","sAnswer","_pushChatMessage","oResp","discoverySpecChatAnswer","answer","done","_generateSpecAndStartTraining","onRetrySpecGeneration","onDownloadTrainingCsv","sUrl","window","open","onResetMlFlow","oSpecResp","discoveryGenerateTrainingSpec","training_spec_yaml","oStartResp","discoveryStartTraining","sJobId","job_id","Error","_startStatusPolling","that","fnPoll","oStatus","discoveryGetTrainingStatus","status","toUpperCase","progress","message","_loadTrainingResult","setTimeout","discoveryGetTrainingResult","aRows","Array","isArray","preview_rows","slice","aColumns","_extractColumns","_mapMetricsItems","metrics","business_summary","csv_download_url","_rebindResultPreviewTable","oTable","byId","unbindItems","removeAllColumns","length","forEach","sName","addColumn","header","text","aCells","map","wrapping","bindItems","path","template","cells","templateShareable","oMetrics","aItems","oData","Object","keys","sKey","v","push","key","value","JSON","stringify","mSeen","aCols","oRow","sRole","sContent","aMessages","clearTimeout","sFallback"],"sources":["Discovery-dbg.controller.js"],"mappings":"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","ignoreList":[]}