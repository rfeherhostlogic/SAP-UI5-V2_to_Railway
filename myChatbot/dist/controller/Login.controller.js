sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast"],function(e,t){"use strict";return e.extend("sap.suite.ui.commons.demo.tutorial.controller.Login",{onLogin:async function(){var e=this.getView().getModel("app");var r=(e.getProperty("/loginName")||"").trim();var o=e.getProperty("/loginPassword")||"";if(!r||!o){t.show("Add meg a felhasznalonevet es a jelszot.");return}try{var s=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"same-origin",body:JSON.stringify({username:r,password:o})});var a=await s.json().catch(function(){return{}});if(!s.ok){t.show(a&&a.error||"Hibas belepesi adatok.");return}e.setProperty("/isAuthenticated",true);e.setProperty("/userName",a.user&&a.user.displayName||r);e.setProperty("/loginName",a.user&&a.user.username||r);e.setProperty("/loginPassword","");e.setProperty("/selectedMenuKey","noah");this.getOwnerComponent().getRouter().navTo("main",{},true)}catch(e){t.show("Belepesi hiba. Ellenorizd a szervert.")}}})});
//# sourceMappingURL=Login.controller.js.map