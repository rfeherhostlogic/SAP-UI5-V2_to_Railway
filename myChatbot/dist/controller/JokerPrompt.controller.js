sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast","sap/suite/ui/commons/demo/tutorial/service/AiService"],function(e,t,r){"use strict";return e.extend("sap.suite.ui.commons.demo.tutorial.controller.JokerPrompt",{onInit:function(){this.getOwnerComponent().getRouter().getRoute("jokerPrompt").attachPatternMatched(this._onRouteMatched,this)},onGenerate:async function(){await this._runGenerate(true)},onSend:async function(){await this._runGenerate(false)},onRunDummy4:async function(){var e=this.getView().getModel("jokers");var o=(e.getProperty("/dummy4Question")||"").trim();var s=(e.getProperty("/dummy4SchemaHint")||"").trim();if(!o){t.show("A kerdes mezot toltsd ki.");return}if(!s){t.show("A schema hint mezot toltsd ki.");return}e.setProperty("/generating",true);e.setProperty("/dummy4GeneratedSql","");e.setProperty("/dummy4Summary","");e.setProperty("/dummy4Rows",[]);try{var n=await r.runDummy4({question:o,schemaHint:s});e.setProperty("/dummy4GeneratedSql",n.generatedSql||"");e.setProperty("/dummy4Summary",n.summary||"");e.setProperty("/dummy4Rows",n.rows||[])}catch(e){t.show(e&&e.message?e.message:"Dummy4 hiba tortent.")}finally{e.setProperty("/generating",false)}},onCancel:function(){var e=this.getView().getModel("jokers");e.setProperty("/promptInput","");e.setProperty("/resultText","");e.setProperty("/dummy4Question","");e.setProperty("/dummy4GeneratedSql","");e.setProperty("/dummy4Summary","");e.setProperty("/dummy4Rows",[]);this.getOwnerComponent().getRouter().navTo("mainMenu",{menuKey:"jokers"})},_onRouteMatched:function(e){var t=e.getParameter("arguments").jokerId;var r=this.getView().getModel("jokers");var o=r.getProperty("/tiles")||[];var s=o.find(function(e){return e.id===t});if(s){r.setProperty("/selectedJoker",s);r.setProperty("/resultText","");if(s.id==="dummy-4"){r.setProperty("/dummy4GeneratedSql","");r.setProperty("/dummy4Summary","");r.setProperty("/dummy4Rows",[])}}},_runGenerate:async function(e){var o=this.getView().getModel("jokers");var s=o.getProperty("/selectedJoker");var n=(o.getProperty("/promptInput")||"").trim();if(!s){t.show("Nincs kivalasztott joker.");return}if(!n){t.show("Adj meg szoveget a folytatashoz.");return}o.setProperty("/generating",true);try{var a=await r.generate({title:s.title,systemPrompt:e?s.systemPrompt:"",inputText:n});o.setProperty("/resultText",a)}catch(e){t.show(e&&e.message?e.message:"Hiba tortent a Generate hivaskor.")}finally{o.setProperty("/generating",false)}}})});
//# sourceMappingURL=JokerPrompt.controller.js.map